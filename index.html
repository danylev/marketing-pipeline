<!DOCTYPE html>
<html>
    <head>
        <!-- Global site tag (gtag.js) - Google Analytics -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123579350-1"></script>
            <script>
        window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
                    gtag('config', 'UA-123579350-1');
                    </script>
                        <meta charset='utf-8' />
                        <title>Где программист? Найти программиста</title>
                            <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
                            <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.47.0/mapbox-gl.js'></script>
                                <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.47.0/mapbox-gl.css' rel='stylesheet' />
                                <style>
        body { margin:0; padding:0; }
            #map { position:absolute; top:0; bottom:0; width:100%; }
            </style>
    </head>
    <body>

    <div id='map'></div>
    <script>
mapboxgl.accessToken = 'pk.eyJ1IjoicHZ2dnZ2IiwiYSI6ImNqanNoamo2bTAwMzYzd3FqNjVqcDhjY2oifQ.OPHDWiHVdwjK82eTrmFDqw';
var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/pvvvvv/cjkjwixpz0rxw2sn35lgc28to',
            zoom: 10,
            center: [30.523397, 50.450097]
});

map.on('load', function () {

        map.addLayer({
                'id': 'fops',
                    'type': 'circle',
                        'source': {
                                type: 'vector',
                                        url: 'mapbox://pvvvvv.104y2v4q'
                                            },
                            'source-layer': 'geo-9msqrv',
                                'paint': {
                                        // make circles larger as the user zooms from z12 to z22
                                        'circle-radius': {
                                                    'base': 1.75,
                                                            'stops': [[12, 2], [22, 180]]
                                                                    },
                                                // color circles by ethnicity, using a match expression
                                                // https://www.mapbox.com/mapbox-gl-js/style-spec/#expressions-match
                                                'circle-color': [
                                                            'match',
                                                                    ['get', 'ethnicity'],
                                                                            'White', '#666666',
                                                                                    'Black', '#666666',
                                                                                            'Hispanic', '#666666',
                                                                                                    'Asian', '#666666',
                                                                                                            /* other */ '#666666'
                                                                                                                ]
                                                                                                                    }
                });
});

map.on('click', function(e) {
      var features = map.queryRenderedFeatures(e.point, {
          layers: ['fops'] // replace this with the name of the layer
            });

        if (!features.length) {
            return;
          }

      var html = '';
        for(var i = 0; i < features.length; i++) {
            html += '<h4>' + features[i].properties.name + '</h4>' + features[i].properties.address + '<br />'
              }
          var feature = features[0];
            var popup = new mapboxgl.Popup({ offset: [0, -15] })
                .setLngLat(feature.geometry.coordinates)
                .setHTML(html)
                    .setLngLat(feature.geometry.coordinates)
                    .addTo(map);
});


    </script>

    </body>
</html>
